---
title:  "스트림"
layout: single
categories:
  - java
tags:
  - o'reilly
  - 함수형 프로그래밍
---

## 외부반복
반복문을 이용하여 각 요소를 순회한다.

```java
List<String> names = Arrays.asList("kim", "rang", "dong", "jang");

for (String name : names) {
    System.out.println(name);
}
```

## 내부반복
무엇을 할지 정의하고 어떻게 수행될지에 대한 세부사항은 라이브러리에 의해 관리된다.

```java
List<String> names = Arrays.asList("kim", "rang", "dong", "jang");

names.stream().forEach(this::print);

private void print(String name){ // 필수 X
    System.out.println(name);
}
```

## 스트림
Map/Filter/Reduce 세 가지 연산으로 축약됨

- 맵(`Map`) : 데이터 변환
- 필터(`Filter`) : 데이터 선택
- 리듀스(`Reduce`) : 결과도출


```java
public record Shape(int corners) implements Comparable<Shape> {
    
    public boolean hasCorners(){
        return corners() > 0;
    }

    public List<Shape> twice(){
        return List.of(this, this);
    }

    @Override
    public int compareTo(Shape o){
        return Integer.compare(corners(), o.corners());
    }

    public static Shape circle(){
        return new Shape(0);
    }

    public static Shape triangle(){
        return new Shape(3);
    }

    public static Shape square(){
        return new Shape(4);
    }
}
```

## 요소 선택
### Filter
```java
List<Shape> shapes = Arrays.asList(new Shape(4), new Shape(3), new Shape(3), new Shape(0), new Shape(4), new Shape(0));


List<Shape> filterShapes = shapes.stream()
                                 .filter(Shape::hasCorners)
                                 .collect(Collectors.toList());


System.out.println(filterShapes.toString()); // [Shape(4), Shape(3), Shape(3), Shape(4)]
```













